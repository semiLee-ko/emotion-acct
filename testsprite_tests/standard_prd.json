{
  "meta": {
    "project": "감정 영수증 (Mood Receipt)",
    "date": "2025-12-18",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "Mood Receipt is a novel digital ledger app integrated within the Toss app ecosystem, designed to record not just what users buy but the emotional reasons behind each purchase. It visualizes consumers' emotional spending patterns aligned with the 'Feel-conomy' trend, enhancing psychological insight and satisfaction for Korean users in their 20s and 30s.",
  "core_goals": [
    "Seamless authentication using Toss App integration for effortless login without explicit sign-in UI.",
    "Enable users to add, view, edit, and delete emotion-tagged receipts that represent their spending emotions.",
    "Visualize monthly spending emotions via charts and a mood thermometer to provide emotional insight into consumption.",
    "Provide easy sharing capabilities of receipt summaries through image capture and native sharing APIs.",
    "Create an intuitive and aesthetically pleasing user interface with a receipt-style feed and modal inputs suited for mobile WebView."
  ],
  "key_features": [
    "Authentication leveraging Toss SDK and Firebase Custom Tokens with anonymous fallback for robust user identification.",
    "Receipt Management system supporting adding new emotion receipts with amount, emotion selection, and notes, infinite scroll for loading receipts, and deletion with visual and sound effects.",
    "Statistics Dashboard displaying monthly total expenditures, emotion breakdowns using donut charts, and a mood thermometer visualization.",
    "Image Capture of the stats dashboard or receipt views using html2canvas allowing sharing via native device share dialogs.",
    "Bottom Sheet modal UI for entering spending receipts with numeric keypad for amount, emotion radio buttons, and a short memo field limited to 20 characters."
  ],
  "user_flow_summary": [
    "User opens app inside Toss via WebView and auto logs in through Toss SDK without a visible login screen, showing a loading spinner temporarily.",
    "User views their receipt feed, which displays emotion-tagged spending receipts in descending order by date with infinite scroll loading older receipts.",
    "User taps the '+' button at the bottom to open the input modal, enters the amount, selects an emotion from five emojis, writes a short note, and saves it to Firestore.",
    "User can swipe or long-press a receipt to delete it, triggering a tearing sound and animation effect confirming deletion.",
    "User navigates to the statistics screen to see a summary of the current month's spending by emotion represented as donut charts and a mood thermometer, with insight messages about dominant emotions.",
    "User can share selected receipts or dashboards via the native sharing dialog using image captures generated by html2canvas."
  ],
  "validation_criteria": [
    "Successful automatic authentication through Toss SDK and Firebase user document creation if new user.",
    "Firestore CRUD operations must persist receipts accurately, including adding, editing, deleting, and querying with correct ordering and limits.",
    "UI responsiveness and visual correctness of receipt feed with infinite scroll, modal input, and deletion animations.",
    "Accuracy and performance of statistics calculations and correct rendering of donut charts and mood thermometer components.",
    "Image capture functionality successfully produces sharable images that are compatible with native sharing on target mobile platforms.",
    "Overall app usability and adherence to design guidelines (fonts, colors, receipt aesthetics) with smooth transitions and error handling."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "React",
      "Vite",
      "Mantine",
      "Firebase",
      "Framer Motion"
    ],
    "features": [
      {
        "name": "Authentication",
        "description": "Handles user login via Toss App integration and Firebase Custom Tokens, with anonymous fallback. Includes mock support for local dev.",
        "files": [
          "src/lib/firebase.ts",
          "src/lib/toss-sdk.ts"
        ]
      },
      {
        "name": "Receipt Management",
        "description": "Allows adding, viewing, editing, and deleting emotion receipts. Includes daily limit logic and input validation.",
        "files": [
          "src/components/AddReceiptModal.tsx",
          "src/components/ReceiptItem.tsx",
          "src/App.tsx",
          "src/components/ConfirmModal.tsx"
        ]
      },
      {
        "name": "Statistics Dashboard",
        "description": "Visualizes emotion data with a thermometer (MoodThermometer) and calendar view. Shows total amount and emotion counts.",
        "files": [
          "src/components/StatsView.tsx",
          "src/components/MoodThermometer.tsx",
          "src/components/CalendarModal.tsx"
        ]
      },
      {
        "name": "Image Capture",
        "description": "Captures the dashboard as an image for sharing or saving, utilizing html2canvas.",
        "files": [
          "src/lib/capture.ts"
        ]
      },
      {
        "name": "App Configuration",
        "description": "Global app configuration and permissions.",
        "files": [
          "granite.config.ts"
        ]
      }
    ]
  }
}
